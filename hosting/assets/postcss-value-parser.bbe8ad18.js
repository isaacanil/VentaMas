var b="(".charCodeAt(0),m=")".charCodeAt(0),I="'".charCodeAt(0),k='"'.charCodeAt(0),P="\\".charCodeAt(0),p="/".charCodeAt(0),O=",".charCodeAt(0),U=":".charCodeAt(0),g="*".charCodeAt(0),$="u".charCodeAt(0),L="U".charCodeAt(0),N="+".charCodeAt(0),R=/^[a-f0-9?-]+$/i,B=function(n){for(var d=[],t=n,e,s,u,r,i,f,h,y,o=0,a=t.charCodeAt(o),Q=t.length,l=[{nodes:d}],C=0,c,A="",v="",x="";o<Q;)if(a<=32){e=o;do e+=1,a=t.charCodeAt(e);while(a<=32);r=t.slice(o,e),u=d[d.length-1],a===m&&C?x=r:u&&u.type==="div"?(u.after=r,u.sourceEndIndex+=r.length):a===O||a===U||a===p&&t.charCodeAt(e+1)!==g&&(!c||c&&c.type==="function"&&c.value!=="calc")?v=r:d.push({type:"space",sourceIndex:o,sourceEndIndex:e,value:r}),o=e}else if(a===I||a===k){e=o,s=a===I?"'":'"',r={type:"string",sourceIndex:o,quote:s};do if(i=!1,e=t.indexOf(s,e+1),~e)for(f=e;t.charCodeAt(f-1)===P;)f-=1,i=!i;else t+=s,e=t.length-1,r.unclosed=!0;while(i);r.value=t.slice(o+1,e),r.sourceEndIndex=r.unclosed?e:e+1,d.push(r),o=e+1,a=t.charCodeAt(o)}else if(a===p&&t.charCodeAt(o+1)===g)e=t.indexOf("*/",o),r={type:"comment",sourceIndex:o,sourceEndIndex:e+2},e===-1&&(r.unclosed=!0,e=t.length,r.sourceEndIndex=e),r.value=t.slice(o+2,e),d.push(r),o=e+2,a=t.charCodeAt(o);else if((a===p||a===g)&&c&&c.type==="function"&&c.value==="calc")r=t[o],d.push({type:"word",sourceIndex:o-v.length,sourceEndIndex:o+r.length,value:r}),o+=1,a=t.charCodeAt(o);else if(a===p||a===O||a===U)r=t[o],d.push({type:"div",sourceIndex:o-v.length,sourceEndIndex:o+r.length,value:r,before:v,after:""}),v="",o+=1,a=t.charCodeAt(o);else if(b===a){e=o;do e+=1,a=t.charCodeAt(e);while(a<=32);if(y=o,r={type:"function",sourceIndex:o-A.length,value:A,before:t.slice(y+1,e)},o=e,A==="url"&&a!==I&&a!==k){e-=1;do if(i=!1,e=t.indexOf(")",e+1),~e)for(f=e;t.charCodeAt(f-1)===P;)f-=1,i=!i;else t+=")",e=t.length-1,r.unclosed=!0;while(i);h=e;do h-=1,a=t.charCodeAt(h);while(a<=32);y<h?(o!==h+1?r.nodes=[{type:"word",sourceIndex:o,sourceEndIndex:h+1,value:t.slice(o,h+1)}]:r.nodes=[],r.unclosed&&h+1!==e?(r.after="",r.nodes.push({type:"space",sourceIndex:h+1,sourceEndIndex:e,value:t.slice(h+1,e)})):(r.after=t.slice(h+1,e),r.sourceEndIndex=e)):(r.after="",r.nodes=[]),o=e+1,r.sourceEndIndex=r.unclosed?e:o,a=t.charCodeAt(o),d.push(r)}else C+=1,r.after="",r.sourceEndIndex=o+1,d.push(r),l.push(r),d=r.nodes=[],c=r;A=""}else if(m===a&&C)o+=1,a=t.charCodeAt(o),c.after=x,c.sourceEndIndex+=x.length,x="",C-=1,l[l.length-1].sourceEndIndex=o,l.pop(),c=l[C],d=c.nodes;else{e=o;do a===P&&(e+=1),e+=1,a=t.charCodeAt(e);while(e<Q&&!(a<=32||a===I||a===k||a===O||a===U||a===p||a===b||a===g&&c&&c.type==="function"&&c.value==="calc"||a===p&&c.type==="function"&&c.value==="calc"||a===m&&C));r=t.slice(o,e),b===a?A=r:($===r.charCodeAt(0)||L===r.charCodeAt(0))&&N===r.charCodeAt(1)&&R.test(r.slice(2))?d.push({type:"unicode-range",sourceIndex:o,sourceEndIndex:e,value:r}):d.push({type:"word",sourceIndex:o,sourceEndIndex:e,value:r}),o=e}for(o=l.length-1;o;o-=1)l[o].unclosed=!0,l[o].sourceEndIndex=t.length;return l[0].nodes},E="-".charCodeAt(0),w="+".charCodeAt(0),q=".".charCodeAt(0),X="e".charCodeAt(0),j="E".charCodeAt(0);function z(n){var d=n.charCodeAt(0),t;if(d===w||d===E){if(t=n.charCodeAt(1),t>=48&&t<=57)return!0;var e=n.charCodeAt(2);return t===q&&e>=48&&e<=57}return d===q?(t=n.charCodeAt(1),t>=48&&t<=57):d>=48&&d<=57}var D=function(n){var d=0,t=n.length,e,s,u;if(t===0||!z(n))return!1;for(e=n.charCodeAt(d),(e===w||e===E)&&d++;d<t&&(e=n.charCodeAt(d),!(e<48||e>57));)d+=1;if(e=n.charCodeAt(d),s=n.charCodeAt(d+1),e===q&&s>=48&&s<=57)for(d+=2;d<t&&(e=n.charCodeAt(d),!(e<48||e>57));)d+=1;if(e=n.charCodeAt(d),s=n.charCodeAt(d+1),u=n.charCodeAt(d+2),(e===X||e===j)&&(s>=48&&s<=57||(s===w||s===E)&&u>=48&&u<=57))for(d+=s===w||s===E?3:2;d<t&&(e=n.charCodeAt(d),!(e<48||e>57));)d+=1;return{number:n.slice(0,d),unit:n.slice(d)}};export{B as p,D as u};
